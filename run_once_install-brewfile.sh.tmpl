{{ if eq .chezmoi.os "darwin" -}}
#!/bin/bash
# chezmoi:template
# chezmoi:executable

set -e

echo "ğŸº æ£€æŸ¥ Homebrew å®‰è£…çŠ¶æ€..."

# æ£€æŸ¥ Homebrew æ˜¯å¦å·²å®‰è£…
if ! command -v brew &> /dev/null; then
    echo "ğŸ“¦ å®‰è£… Homebrew..."
    /bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"
    
    # æ ¹æ®æ¶æ„è®¾ç½® PATH
    if [[ $(uname -m) == 'arm64' ]]; then
        echo 'eval "$(/opt/homebrew/bin/brew shellenv)"' >> ~/.zprofile
        eval "$(/opt/homebrew/bin/brew shellenv)"
    else
        echo 'eval "$(/usr/local/bin/brew shellenv)"' >> ~/.zprofile
        eval "$(/usr/local/bin/brew shellenv)"
    fi
else
    echo "âœ… Homebrew å·²å®‰è£…"
fi

echo "ğŸ“¦ ä» Brewfile å®‰è£…è½¯ä»¶åŒ…..."
brew bundle --file={{ .chezmoi.sourceDir }}/Brewfile

echo "âœ… Homebrew è½¯ä»¶åŒ…å®‰è£…å®Œæˆï¼"
{{ end -}}
